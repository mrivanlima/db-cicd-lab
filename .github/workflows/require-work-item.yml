name: Require Work Item

on:
  pull_request:
    types: [opened, edited, synchronize, reopened]

jobs:
  require-work-item:
    runs-on: ubuntu-latest
    steps:
      - name: Check PR for Azure Boards work item reference (AB#1234)
        uses: actions/github-script@v7
        with:
          script: |
            const pr = context.payload.pull_request;
            const text = `${pr.title}\n${pr.body || ""}`;
            const pattern = /\bAB#\d+\b/;

            if (!pattern.test(text)) {
              core.setFailed('Missing work item reference. Add "AB#1234" to the PR title or description.');
            }
